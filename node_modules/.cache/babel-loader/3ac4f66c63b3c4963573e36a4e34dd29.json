{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { SafeEventEmitter } from '@toruslabs/openlogin-jrpc';\nimport { CustomError } from 'ts-custom-error';\nimport loglevel$1 from 'loglevel';\nconst CHAIN_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  OTHER: \"other\"\n};\nconst ADAPTER_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  MULTICHAIN: \"multichain\"\n};\nconst DEFAULT_INFURA_ID = \"776218ac4734478c90191dde8cae483c\";\n\nconst getDefaultNetworkId = chainNamespace => {\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return 1;\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return 1;\n  }\n\n  throw new Error(\"Chain namespace \".concat(chainNamespace, \" is not supported\"));\n};\n\nconst getEvmChainConfig = chainId => {\n  const chainNamespace = CHAIN_NAMESPACES.EIP155;\n\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: \"https://mainnet.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"Ethereum Mainnet\",\n      blockExplorer: \"https://etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 3) {\n    return {\n      chainNamespace,\n      chainId: \"0x3\",\n      rpcTarget: \"https://ropsten.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"ropsten\",\n      blockExplorer: \"https://ropsten.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 4) {\n    return {\n      chainNamespace,\n      chainId: \"0x4\",\n      rpcTarget: \"https://rinkeby.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"rinkeby\",\n      blockExplorer: \"https://rinkeby.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 5) {\n    return {\n      chainNamespace,\n      chainId: \"0x5\",\n      rpcTarget: \"https://goerli.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"goerli\",\n      blockExplorer: \"https://goerli.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 42) {\n    return {\n      chainNamespace,\n      chainId: \"0x2a\",\n      rpcTarget: \"https://kovan.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"kovan\",\n      blockExplorer: \"https://kovan.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 137) {\n    return {\n      chainNamespace,\n      rpcTarget: \"https://polygon-rpc.com\",\n      blockExplorer: \"https://polygonscan.com\",\n      chainId: \"0x89\",\n      displayName: \"Polygon Mainnet\",\n      ticker: \"matic\",\n      tickerName: \"matic\"\n    };\n  } else if (chainId === 80001) {\n    return {\n      chainNamespace,\n      rpcTarget: \"https://rpc-mumbai.maticvigil.com\",\n      blockExplorer: \"https://mumbai-explorer.matic.today\",\n      chainId: \"0x13881\",\n      displayName: \"Polygon Mumbai Testnet\",\n      ticker: \"matic\",\n      tickerName: \"matic\"\n    };\n  } else if (chainId === 56) {\n    return {\n      chainNamespace,\n      rpcTarget: \"https://bsc-dataseed.binance.org\",\n      blockExplorer: \"https://bscscan.com\",\n      chainId: \"0x38\",\n      displayName: \"Binance SmartChain Mainnet\",\n      ticker: \"BNB\",\n      tickerName: \"BNB\"\n    };\n  } else if (chainId === 97) {\n    return {\n      chainNamespace,\n      rpcTarget: \"https://data-seed-prebsc-2-s3.binance.org:8545\",\n      blockExplorer: \"https://testnet.bscscan.com\",\n      chainId: \"0x61\",\n      displayName: \"Binance SmartChain Testnet\",\n      ticker: \"BNB\",\n      tickerName: \"BNB\"\n    };\n  }\n\n  return null;\n};\n\nconst getSolanaChainConfig = chainId => {\n  const chainNamespace = CHAIN_NAMESPACES.SOLANA;\n\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      blockExplorer: \"https://explorer.solana.com\",\n      chainId: \"0x1\",\n      displayName: \"Solana Mainnet\",\n      rpcTarget: \"https://api.mainnet-beta.solana.com\",\n      ticker: \"SOL\",\n      tickerName: \"Solana Token\"\n    };\n  } else if (chainId === 2) {\n    return {\n      rpcTarget: \"https://api.testnet.solana.com\",\n      blockExplorer: \"https://explorer.solana.com?cluster=testnet\",\n      chainId: \"0x2\",\n      chainNamespace,\n      displayName: \"testnet\",\n      ticker: \"SOL\",\n      tickerName: \"solana\"\n    };\n  } else if (chainId === 3) {\n    return {\n      rpcTarget: \"https://api.devnet.solana.com\",\n      blockExplorer: \"https://explorer.solana.com?cluster=devnet\",\n      chainId: \"0x3\",\n      chainNamespace,\n      displayName: \"devnet\",\n      ticker: \"SOL\",\n      tickerName: \"solana\"\n    };\n  }\n\n  return null;\n};\n\nconst getChainConfig = (chainNamespace, chainId) => {\n  if (chainNamespace === CHAIN_NAMESPACES.OTHER) return null;\n  const finalChainId = chainId ? typeof chainId === \"number\" ? chainId : parseInt(chainId, 16) : getDefaultNetworkId(chainNamespace);\n\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return getEvmChainConfig(finalChainId);\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return getSolanaChainConfig(finalChainId);\n  }\n\n  return null;\n};\n\nclass Web3AuthError extends CustomError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(message);\n\n    _defineProperty(this, \"code\", void 0);\n\n    _defineProperty(this, \"message\", void 0);\n\n    this.code = code;\n    this.message = message || \"\"; // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"Web3AuthError\"\n    });\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      code: this.code,\n      message: this.message\n    };\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n\n}\n\nclass WalletInitializationError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletInitializationError\"\n    });\n  }\n\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletInitializationError(code, \"\".concat(WalletInitializationError.messages[code], \", \").concat(extraMessage));\n  } // Custom methods\n\n\n  static notFound() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5001, extraMessage);\n  }\n\n  static notInstalled() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5002, extraMessage);\n  }\n\n  static notReady() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5003, extraMessage);\n  }\n\n  static windowBlocked() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5004, extraMessage);\n  }\n\n  static windowClosed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5005, extraMessage);\n  }\n\n  static incompatibleChainNameSpace() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5006, extraMessage);\n  }\n\n  static duplicateAdapterError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5007, extraMessage);\n  }\n\n  static invalidProviderConfigError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5008, extraMessage);\n  }\n\n  static providerNotReadyError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5009, extraMessage);\n  }\n\n  static rpcConnectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5010, extraMessage);\n  }\n\n  static invalidParams() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5011, extraMessage);\n  }\n\n  static invalidNetwork() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5013, extraMessage);\n  }\n\n}\n/**\n * wallet login errors\n */\n\n\n_defineProperty(WalletInitializationError, \"messages\", {\n  5000: \"Custom\",\n  5001: \"Wallet is not found\",\n  5002: \"Wallet is not installed\",\n  5003: \"Wallet is not ready yet\",\n  5004: \"Wallet window is blocked\",\n  5005: \"Wallet window has been closed by the user\",\n  5006: \"Incompatible chain namespace provided\",\n  5007: \"Adapter has already been included\",\n  5008: \"Invalid provider Config\",\n  5009: \"Provider is not ready yet\",\n  5010: \"Failed to connect with rpc url\",\n  5011: \"Invalid params passed in\",\n  5013: \"Invalid network provided\"\n});\n\nclass WalletLoginError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletLoginError\"\n    });\n  }\n\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletLoginError(code, \"\".concat(WalletLoginError.messages[code]).concat(extraMessage));\n  }\n\n  static connectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5111, extraMessage);\n  }\n\n  static disconnectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5112, extraMessage);\n  }\n\n  static notConnectedError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5113, extraMessage);\n  }\n\n  static popupClosed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5114, extraMessage);\n  }\n\n}\n\n_defineProperty(WalletLoginError, \"messages\", {\n  5000: \"Custom\",\n  5111: \"Failed to connect with wallet\",\n  5112: \"Failed to disconnect from wallet\",\n  5113: \"Wallet is not connected\",\n  5114: \"Wallet popup has been closed by the user\"\n});\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nconst MULTI_CHAIN_ADAPTERS = {\n  OPENLOGIN: \"openlogin\",\n  WALLET_CONNECT_V1: \"wallet-connect-v1\",\n  WALLET_CONNECT_V2: \"wallet-connect-v2\"\n};\n\nconst SOLANA_ADAPTERS = _objectSpread$1({\n  TORUS_SOLANA: \"torus-solana\",\n  PHANTOM: \"phantom\",\n  SOLLET: \"sollet\",\n  SOLLET_EXTENSION: \"sollet-extension\",\n  SOLFLARE: \"solflare\",\n  SLOPE: \"slope\"\n}, MULTI_CHAIN_ADAPTERS);\n\nconst EVM_ADAPTERS = _objectSpread$1({\n  TORUS_EVM: \"torus-evm\",\n  METAMASK: \"metamask\",\n  COINBASE: \"coinbase\"\n}, MULTI_CHAIN_ADAPTERS);\n\nconst WALLET_ADAPTERS = _objectSpread$1(_objectSpread$1({}, EVM_ADAPTERS), SOLANA_ADAPTERS);\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nconst ADAPTER_CATEGORY = {\n  EXTERNAL: \"external\",\n  IN_APP: \"in_app\"\n};\nconst ADAPTER_STATUS = {\n  NOT_READY: \"not_ready\",\n  READY: \"ready\",\n  CONNECTING: \"connecting\",\n  CONNECTED: \"connected\",\n  DISCONNECTED: \"disconnected\",\n  ERRORED: \"errored\"\n};\n\nconst ADAPTER_EVENTS = _objectSpread(_objectSpread({}, ADAPTER_STATUS), {}, {\n  ADAPTER_DATA_UPDATED: \"adapter_data_updated\"\n});\n\nclass BaseAdapter extends SafeEventEmitter {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"adapterData\", {});\n\n    _defineProperty(this, \"chainConfig\", null);\n  }\n\n  get chainConfigProxy() {\n    return this.chainConfig ? _objectSpread({}, this.chainConfig) : null;\n  }\n\n  setChainConfig(customChainConfig) {\n    if (this.status === ADAPTER_STATUS.READY) return;\n    if (!customChainConfig.chainNamespace) throw WalletInitializationError.notReady(\"ChainNamespace is required while setting chainConfig\");\n    const defaultChainConfig = getChainConfig(customChainConfig.chainNamespace, customChainConfig.chainId);\n    this.chainConfig = _objectSpread(_objectSpread({}, defaultChainConfig), customChainConfig);\n  }\n\n  setAdapterSettings(_) {}\n\n  checkConnectionRequirements() {\n    // we reconnect without killing existing wallet connect session on calling connect again.\n    if (this.name === WALLET_ADAPTERS.WALLET_CONNECT_V1 && this.status === ADAPTER_STATUS.CONNECTING) return;else if (this.status === ADAPTER_STATUS.CONNECTING) throw WalletInitializationError.notReady(\"Already connecting\");\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletLoginError.connectionError(\"Already connected\");\n    if (this.status !== ADAPTER_STATUS.READY) throw WalletLoginError.connectionError(\"Wallet adapter is not ready yet\");\n  }\n\n  checkInitializationRequirements() {\n    if (this.status === ADAPTER_STATUS.NOT_READY) return;\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletInitializationError.notReady(\"Already connected\");\n    if (this.status === ADAPTER_STATUS.READY) throw WalletInitializationError.notReady(\"Adapter is already initialized\");\n  }\n\n  updateAdapterData(data) {\n    this.adapterData = data;\n    this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, {\n      adapterName: this.name,\n      data\n    });\n  }\n\n}\n\nclass BaseNetworkSwitch {}\n\nvar loglevel = loglevel$1.getLogger(\"web3auth-logger\");\nconst PROVIDER_EVENTS = {\n  INITIALIZED: \"initialized\",\n  ERRORED: \"errored\"\n};\n\nfunction storageAvailable(type) {\n  let storageExists = false;\n  let storageLength = 0;\n  let storage;\n\n  try {\n    storage = window[type];\n    storageExists = true;\n    storageLength = storage.length;\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (error) {\n    const _error = error;\n    return !!(_error && ( // everything except Firefox\n    _error.code === 22 || // Firefox\n    _error.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    _error.name === \"QuotaExceededError\" || // Firefox\n    _error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storageExists && storageLength !== 0);\n  }\n}\n\nconst isHexStrict = hex => {\n  return (typeof hex === \"string\" || typeof hex === \"number\") && /^(-)?0x[0-9a-f]*$/i.test(hex);\n};\n\nexport { ADAPTER_CATEGORY, ADAPTER_EVENTS, ADAPTER_NAMESPACES, ADAPTER_STATUS, BaseAdapter, BaseNetworkSwitch, CHAIN_NAMESPACES, DEFAULT_INFURA_ID, EVM_ADAPTERS, MULTI_CHAIN_ADAPTERS, PROVIDER_EVENTS, SOLANA_ADAPTERS, WALLET_ADAPTERS, WalletInitializationError, WalletLoginError, Web3AuthError, getChainConfig, getEvmChainConfig, getSolanaChainConfig, isHexStrict, loglevel as log, storageAvailable };","map":{"version":3,"sources":["../src/chain/IChainInterface.ts","../src/chain/config.ts","../src/errors/index.ts","../src/wallet/index.ts","../src/adapter/IAdapter.ts","../src/loglevel.ts","../src/provider/IProvider.ts","../src/utils.ts"],"names":["CHAIN_NAMESPACES","EIP155","SOLANA","OTHER","ADAPTER_NAMESPACES","MULTICHAIN","DEFAULT_INFURA_ID","getDefaultNetworkId","chainNamespace","getEvmChainConfig","chainId","rpcTarget","displayName","blockExplorer","ticker","tickerName","getSolanaChainConfig","getChainConfig","finalChainId","parseInt","constructor","message","Object","value","toJSON","name","code","toString","JSON","WalletInitializationError","fromCode","extraMessage","notFound","notInstalled","notReady","windowBlocked","windowClosed","incompatibleChainNameSpace","duplicateAdapterError","invalidProviderConfigError","providerNotReadyError","rpcConnectionError","invalidParams","invalidNetwork","WalletLoginError","connectionError","disconnectionError","notConnectedError","popupClosed","MULTI_CHAIN_ADAPTERS","OPENLOGIN","WALLET_CONNECT_V1","WALLET_CONNECT_V2","SOLANA_ADAPTERS","TORUS_SOLANA","PHANTOM","SOLLET","SOLLET_EXTENSION","SOLFLARE","SLOPE","EVM_ADAPTERS","TORUS_EVM","METAMASK","COINBASE","WALLET_ADAPTERS","ADAPTER_CATEGORY","EXTERNAL","IN_APP","ADAPTER_STATUS","NOT_READY","READY","CONNECTING","CONNECTED","DISCONNECTED","ERRORED","ADAPTER_EVENTS","ADAPTER_DATA_UPDATED","chainConfigProxy","setChainConfig","customChainConfig","defaultChainConfig","setAdapterSettings","checkConnectionRequirements","checkInitializationRequirements","updateAdapterData","adapterName","data","BaseNetworkSwitch","loglevel","PROVIDER_EVENTS","INITIALIZED","storageExists","storageLength","storage","window","x","_error","isHexStrict","hex"],"mappings":"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","sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { SafeEventEmitter } from '@toruslabs/openlogin-jrpc';\nimport { CustomError } from 'ts-custom-error';\nimport loglevel$1 from 'loglevel';\n\nconst CHAIN_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  OTHER: \"other\"\n};\nconst ADAPTER_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  MULTICHAIN: \"multichain\"\n};\n\nconst DEFAULT_INFURA_ID = \"776218ac4734478c90191dde8cae483c\";\n\nconst getDefaultNetworkId = chainNamespace => {\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return 1;\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return 1;\n  }\n\n  throw new Error(\"Chain namespace \".concat(chainNamespace, \" is not supported\"));\n};\n\nconst getEvmChainConfig = chainId => {\n  const chainNamespace = CHAIN_NAMESPACES.EIP155;\n\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: \"https://mainnet.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"Ethereum Mainnet\",\n      blockExplorer: \"https://etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 3) {\n    return {\n      chainNamespace,\n      chainId: \"0x3\",\n      rpcTarget: \"https://ropsten.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"ropsten\",\n      blockExplorer: \"https://ropsten.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 4) {\n    return {\n      chainNamespace,\n      chainId: \"0x4\",\n      rpcTarget: \"https://rinkeby.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"rinkeby\",\n      blockExplorer: \"https://rinkeby.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 5) {\n    return {\n      chainNamespace,\n      chainId: \"0x5\",\n      rpcTarget: \"https://goerli.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"goerli\",\n      blockExplorer: \"https://goerli.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 42) {\n    return {\n      chainNamespace,\n      chainId: \"0x2a\",\n      rpcTarget: \"https://kovan.infura.io/v3/\".concat(DEFAULT_INFURA_ID),\n      displayName: \"kovan\",\n      blockExplorer: \"https://kovan.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\"\n    };\n  } else if (chainId === 137) {\n    return {\n      chainNamespace,\n      rpcTarget: \"https://polygon-rpc.com\",\n      blockExplorer: \"https://polygonscan.com\",\n      chainId: \"0x89\",\n      displayName: \"Polygon Mainnet\",\n      ticker: \"matic\",\n      tickerName: \"matic\"\n    };\n  } else if (chainId === 80001) {\n    return {\n      chainNamespace,\n      rpcTarget: \"https://rpc-mumbai.maticvigil.com\",\n      blockExplorer: \"https://mumbai-explorer.matic.today\",\n      chainId: \"0x13881\",\n      displayName: \"Polygon Mumbai Testnet\",\n      ticker: \"matic\",\n      tickerName: \"matic\"\n    };\n  } else if (chainId === 56) {\n    return {\n      chainNamespace,\n      rpcTarget: \"https://bsc-dataseed.binance.org\",\n      blockExplorer: \"https://bscscan.com\",\n      chainId: \"0x38\",\n      displayName: \"Binance SmartChain Mainnet\",\n      ticker: \"BNB\",\n      tickerName: \"BNB\"\n    };\n  } else if (chainId === 97) {\n    return {\n      chainNamespace,\n      rpcTarget: \"https://data-seed-prebsc-2-s3.binance.org:8545\",\n      blockExplorer: \"https://testnet.bscscan.com\",\n      chainId: \"0x61\",\n      displayName: \"Binance SmartChain Testnet\",\n      ticker: \"BNB\",\n      tickerName: \"BNB\"\n    };\n  }\n\n  return null;\n};\nconst getSolanaChainConfig = chainId => {\n  const chainNamespace = CHAIN_NAMESPACES.SOLANA;\n\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      blockExplorer: \"https://explorer.solana.com\",\n      chainId: \"0x1\",\n      displayName: \"Solana Mainnet\",\n      rpcTarget: \"https://api.mainnet-beta.solana.com\",\n      ticker: \"SOL\",\n      tickerName: \"Solana Token\"\n    };\n  } else if (chainId === 2) {\n    return {\n      rpcTarget: \"https://api.testnet.solana.com\",\n      blockExplorer: \"https://explorer.solana.com?cluster=testnet\",\n      chainId: \"0x2\",\n      chainNamespace,\n      displayName: \"testnet\",\n      ticker: \"SOL\",\n      tickerName: \"solana\"\n    };\n  } else if (chainId === 3) {\n    return {\n      rpcTarget: \"https://api.devnet.solana.com\",\n      blockExplorer: \"https://explorer.solana.com?cluster=devnet\",\n      chainId: \"0x3\",\n      chainNamespace,\n      displayName: \"devnet\",\n      ticker: \"SOL\",\n      tickerName: \"solana\"\n    };\n  }\n\n  return null;\n};\nconst getChainConfig = (chainNamespace, chainId) => {\n  if (chainNamespace === CHAIN_NAMESPACES.OTHER) return null;\n  const finalChainId = chainId ? typeof chainId === \"number\" ? chainId : parseInt(chainId, 16) : getDefaultNetworkId(chainNamespace);\n\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return getEvmChainConfig(finalChainId);\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return getSolanaChainConfig(finalChainId);\n  }\n\n  return null;\n};\n\nclass Web3AuthError extends CustomError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(message);\n\n    _defineProperty(this, \"code\", void 0);\n\n    _defineProperty(this, \"message\", void 0);\n\n    this.code = code;\n    this.message = message || \"\"; // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"Web3AuthError\"\n    });\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      code: this.code,\n      message: this.message\n    };\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n\n}\nclass WalletInitializationError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletInitializationError\"\n    });\n  }\n\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletInitializationError(code, \"\".concat(WalletInitializationError.messages[code], \", \").concat(extraMessage));\n  } // Custom methods\n\n\n  static notFound() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5001, extraMessage);\n  }\n\n  static notInstalled() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5002, extraMessage);\n  }\n\n  static notReady() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5003, extraMessage);\n  }\n\n  static windowBlocked() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5004, extraMessage);\n  }\n\n  static windowClosed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5005, extraMessage);\n  }\n\n  static incompatibleChainNameSpace() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5006, extraMessage);\n  }\n\n  static duplicateAdapterError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5007, extraMessage);\n  }\n\n  static invalidProviderConfigError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5008, extraMessage);\n  }\n\n  static providerNotReadyError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5009, extraMessage);\n  }\n\n  static rpcConnectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5010, extraMessage);\n  }\n\n  static invalidParams() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5011, extraMessage);\n  }\n\n  static invalidNetwork() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5013, extraMessage);\n  }\n\n}\n/**\n * wallet login errors\n */\n\n_defineProperty(WalletInitializationError, \"messages\", {\n  5000: \"Custom\",\n  5001: \"Wallet is not found\",\n  5002: \"Wallet is not installed\",\n  5003: \"Wallet is not ready yet\",\n  5004: \"Wallet window is blocked\",\n  5005: \"Wallet window has been closed by the user\",\n  5006: \"Incompatible chain namespace provided\",\n  5007: \"Adapter has already been included\",\n  5008: \"Invalid provider Config\",\n  5009: \"Provider is not ready yet\",\n  5010: \"Failed to connect with rpc url\",\n  5011: \"Invalid params passed in\",\n  5013: \"Invalid network provided\"\n});\n\nclass WalletLoginError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletLoginError\"\n    });\n  }\n\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletLoginError(code, \"\".concat(WalletLoginError.messages[code]).concat(extraMessage));\n  }\n\n  static connectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5111, extraMessage);\n  }\n\n  static disconnectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5112, extraMessage);\n  }\n\n  static notConnectedError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5113, extraMessage);\n  }\n\n  static popupClosed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5114, extraMessage);\n  }\n\n}\n\n_defineProperty(WalletLoginError, \"messages\", {\n  5000: \"Custom\",\n  5111: \"Failed to connect with wallet\",\n  5112: \"Failed to disconnect from wallet\",\n  5113: \"Wallet is not connected\",\n  5114: \"Wallet popup has been closed by the user\"\n});\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nconst MULTI_CHAIN_ADAPTERS = {\n  OPENLOGIN: \"openlogin\",\n  WALLET_CONNECT_V1: \"wallet-connect-v1\",\n  WALLET_CONNECT_V2: \"wallet-connect-v2\"\n};\nconst SOLANA_ADAPTERS = _objectSpread$1({\n  TORUS_SOLANA: \"torus-solana\",\n  PHANTOM: \"phantom\",\n  SOLLET: \"sollet\",\n  SOLLET_EXTENSION: \"sollet-extension\",\n  SOLFLARE: \"solflare\",\n  SLOPE: \"slope\"\n}, MULTI_CHAIN_ADAPTERS);\nconst EVM_ADAPTERS = _objectSpread$1({\n  TORUS_EVM: \"torus-evm\",\n  METAMASK: \"metamask\",\n  COINBASE: \"coinbase\"\n}, MULTI_CHAIN_ADAPTERS);\nconst WALLET_ADAPTERS = _objectSpread$1(_objectSpread$1({}, EVM_ADAPTERS), SOLANA_ADAPTERS);\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst ADAPTER_CATEGORY = {\n  EXTERNAL: \"external\",\n  IN_APP: \"in_app\"\n};\nconst ADAPTER_STATUS = {\n  NOT_READY: \"not_ready\",\n  READY: \"ready\",\n  CONNECTING: \"connecting\",\n  CONNECTED: \"connected\",\n  DISCONNECTED: \"disconnected\",\n  ERRORED: \"errored\"\n};\nconst ADAPTER_EVENTS = _objectSpread(_objectSpread({}, ADAPTER_STATUS), {}, {\n  ADAPTER_DATA_UPDATED: \"adapter_data_updated\"\n});\nclass BaseAdapter extends SafeEventEmitter {\n  constructor() {\n    super(...arguments);\n\n    _defineProperty(this, \"adapterData\", {});\n\n    _defineProperty(this, \"chainConfig\", null);\n  }\n\n  get chainConfigProxy() {\n    return this.chainConfig ? _objectSpread({}, this.chainConfig) : null;\n  }\n\n  setChainConfig(customChainConfig) {\n    if (this.status === ADAPTER_STATUS.READY) return;\n    if (!customChainConfig.chainNamespace) throw WalletInitializationError.notReady(\"ChainNamespace is required while setting chainConfig\");\n    const defaultChainConfig = getChainConfig(customChainConfig.chainNamespace, customChainConfig.chainId);\n    this.chainConfig = _objectSpread(_objectSpread({}, defaultChainConfig), customChainConfig);\n  }\n\n  setAdapterSettings(_) {}\n\n  checkConnectionRequirements() {\n    // we reconnect without killing existing wallet connect session on calling connect again.\n    if (this.name === WALLET_ADAPTERS.WALLET_CONNECT_V1 && this.status === ADAPTER_STATUS.CONNECTING) return;else if (this.status === ADAPTER_STATUS.CONNECTING) throw WalletInitializationError.notReady(\"Already connecting\");\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletLoginError.connectionError(\"Already connected\");\n    if (this.status !== ADAPTER_STATUS.READY) throw WalletLoginError.connectionError(\"Wallet adapter is not ready yet\");\n  }\n\n  checkInitializationRequirements() {\n    if (this.status === ADAPTER_STATUS.NOT_READY) return;\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletInitializationError.notReady(\"Already connected\");\n    if (this.status === ADAPTER_STATUS.READY) throw WalletInitializationError.notReady(\"Adapter is already initialized\");\n  }\n\n  updateAdapterData(data) {\n    this.adapterData = data;\n    this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, {\n      adapterName: this.name,\n      data\n    });\n  }\n\n}\nclass BaseNetworkSwitch {}\n\nvar loglevel = loglevel$1.getLogger(\"web3auth-logger\");\n\nconst PROVIDER_EVENTS = {\n  INITIALIZED: \"initialized\",\n  ERRORED: \"errored\"\n};\n\nfunction storageAvailable(type) {\n  let storageExists = false;\n  let storageLength = 0;\n  let storage;\n\n  try {\n    storage = window[type];\n    storageExists = true;\n    storageLength = storage.length;\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (error) {\n    const _error = error;\n    return !!(_error && ( // everything except Firefox\n    _error.code === 22 || // Firefox\n    _error.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    _error.name === \"QuotaExceededError\" || // Firefox\n    _error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storageExists && storageLength !== 0);\n  }\n}\nconst isHexStrict = hex => {\n  return (typeof hex === \"string\" || typeof hex === \"number\") && /^(-)?0x[0-9a-f]*$/i.test(hex);\n};\n\nexport { ADAPTER_CATEGORY, ADAPTER_EVENTS, ADAPTER_NAMESPACES, ADAPTER_STATUS, BaseAdapter, BaseNetworkSwitch, CHAIN_NAMESPACES, DEFAULT_INFURA_ID, EVM_ADAPTERS, MULTI_CHAIN_ADAPTERS, PROVIDER_EVENTS, SOLANA_ADAPTERS, WALLET_ADAPTERS, WalletInitializationError, WalletLoginError, Web3AuthError, getChainConfig, getEvmChainConfig, getSolanaChainConfig, isHexStrict, loglevel as log, storageAvailable };\n//# sourceMappingURL=base.esm.js.map\n"]},"metadata":{},"sourceType":"module"}