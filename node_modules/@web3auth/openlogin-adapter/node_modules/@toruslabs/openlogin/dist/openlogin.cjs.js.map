{"version":3,"file":"openlogin.cjs.js","mappings":"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","sources":["webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/http-helpers\"","webpack://@toruslabs/openlogin/external commonjs2 \"lodash.merge\"","webpack://@toruslabs/openlogin/./src/Modal.ts","webpack://@toruslabs/openlogin/./src/OpenLogin.ts","webpack://@toruslabs/openlogin/./src/MemoryStore.ts","webpack://@toruslabs/openlogin/./src/OpenLoginStore.ts","webpack://@toruslabs/openlogin/external commonjs2 \"pump\"","webpack://@toruslabs/openlogin/./src/Provider.ts","webpack://@toruslabs/openlogin/./src/constants.ts","webpack://@toruslabs/openlogin/external commonjs2 \"loglevel\"","webpack://@toruslabs/openlogin/./src/loglevel.ts","webpack://@toruslabs/openlogin/./src/utils.ts","webpack://@toruslabs/openlogin/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/eccrypto\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/openlogin-jrpc\"","webpack://@toruslabs/openlogin/external commonjs2 \"@toruslabs/openlogin-utils\"","webpack://@toruslabs/openlogin/webpack/bootstrap","webpack://@toruslabs/openlogin/webpack/runtime/compat get default export","webpack://@toruslabs/openlogin/webpack/runtime/define property getters","webpack://@toruslabs/openlogin/webpack/runtime/hasOwnProperty shorthand","webpack://@toruslabs/openlogin/webpack/runtime/make namespace object","webpack://@toruslabs/openlogin/./src/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@toruslabs/http-helpers\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash.merge\");","import { LoginConfig, ObjectMultiplex, PostMessageStream, setupMultiplex, Substream, WhiteLabelData } from \"@toruslabs/openlogin-jrpc\";\n\nimport { modalDOMElementID } from \"./constants\";\nimport log from \"./loglevel\";\nimport { documentReady, htmlToElement } from \"./utils\";\n\nexport const handleStream = (handle: Substream, eventName: string, handler: (chunk: unknown) => void): void => {\n  const handlerWrapper = (chunk: unknown) => {\n    handler(chunk);\n    handle.removeListener(eventName, handlerWrapper);\n  };\n  handle.on(eventName, handlerWrapper);\n};\n\nexport class Modal {\n  modalUrl: string;\n\n  iframeElem: HTMLIFrameElement;\n\n  initialized = false;\n\n  modalZIndex = 99999;\n\n  mux: ObjectMultiplex;\n\n  verifierStream: Substream;\n\n  constructor(modalUrl: string) {\n    this.modalUrl = modalUrl;\n  }\n\n  async init(): Promise<void> {\n    await this.initIFrame(this.modalUrl);\n    this.setupStream();\n  }\n\n  setupStream(): void {\n    if (this.iframeElem === null) throw new Error(\"iframe is null\");\n    this.mux = setupMultiplex(\n      new PostMessageStream({\n        name: \"modal_iframe_rpc\",\n        target: \"modal_rpc\",\n        targetWindow: this.iframeElem.contentWindow,\n        targetOrigin: new URL(this.modalUrl).origin,\n      })\n    );\n    this.verifierStream = this.mux.createStream(\"verifier\");\n  }\n\n  async initIFrame(src: string): Promise<void> {\n    await documentReady();\n    const documentIFrameElem = document.getElementById(modalDOMElementID) as HTMLIFrameElement;\n    if (documentIFrameElem) {\n      documentIFrameElem.remove();\n      log.info(\"already initialized, removing previous modal iframe\");\n    }\n    this.iframeElem = htmlToElement<HTMLIFrameElement>(\n      `<iframe\n        id=${modalDOMElementID}\n        class=\"torusIframe\"\n        src=\"${src}\"\n        style=\"display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}\"\n      ></iframe>`\n    );\n    this._hideModal();\n    document.body.appendChild(this.iframeElem);\n    return new Promise<void>((resolve) => {\n      this.iframeElem.onload = () => {\n        this.initialized = true;\n        resolve();\n      };\n    });\n  }\n\n  _showModal(): void {\n    const style: Record<string, unknown> = {};\n    style.display = \"block\";\n    style.position = \"fixed\";\n    style.width = \"100%\";\n    style.height = \"100%\";\n    style.top = \"0px\";\n    style.right = \"0px\";\n    style.left = \"0px\";\n    style.bottom = \"0px\";\n    style.border = \"0\";\n    style[\"z-index\"] = this.modalZIndex;\n    this.iframeElem.setAttribute(\n      \"style\",\n      Object.entries(style)\n        .map(([k, v]) => `${k}:${v}`)\n        .join(\";\")\n    );\n  }\n\n  _hideModal(): void {\n    const style: Record<string, unknown> = {};\n    style.display = \"none\";\n    style.position = \"fixed\";\n    style.width = \"100%\";\n    style.height = \"100%\";\n    style.top = \"0px\";\n    style.right = \"0px\";\n    style.left = \"0px\";\n    style.bottom = \"0px\";\n    style.border = \"0\";\n    style[\"z-index\"] = this.modalZIndex;\n    this.iframeElem.setAttribute(\n      \"style\",\n      Object.entries(style)\n        .map(([k, v]) => `${k}:${v}`)\n        .join(\";\")\n    );\n  }\n\n  async _prompt(clientId: string, whiteLabel: WhiteLabelData, loginConfig: LoginConfig, cb: (chunk: unknown) => Promise<void>): Promise<void> {\n    this._showModal();\n    const modalHandler = (chunk) => {\n      this._hideModal();\n      cb(chunk);\n    };\n    handleStream(this.verifierStream, \"data\", modalHandler);\n    this.verifierStream.write({\n      name: \"prompt\",\n      clientId,\n      whiteLabel,\n      loginConfig,\n    });\n  }\n\n  async cleanup(): Promise<void> {\n    await documentReady();\n    const documentIFrameElem = document.getElementById(modalDOMElementID) as HTMLIFrameElement;\n    if (documentIFrameElem) {\n      documentIFrameElem.remove();\n      this.iframeElem = null;\n    }\n    this.initialized = false;\n  }\n}\n","import { decrypt, Ecies, encrypt, getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { get } from \"@toruslabs/http-helpers\";\nimport { getRpcPromiseCallback, JRPCRequest, LoginConfig, OriginData, SessionInfo, WhiteLabelData } from \"@toruslabs/openlogin-jrpc\";\nimport { base64url, jsonToBase64, keccak, randomId } from \"@toruslabs/openlogin-utils\";\nimport merge from \"lodash.merge\";\n\nimport {\n  ALLOWED_INTERACTIONS,\n  BaseLogoutParams,\n  BaseRedirectParams,\n  CUSTOM_LOGIN_PROVIDER_TYPE,\n  LOGIN_PROVIDER_TYPE,\n  LoginParams,\n  OPENLOGIN_METHOD,\n  OPENLOGIN_NETWORK,\n  OPENLOGIN_NETWORK_TYPE,\n  OpenLoginOptions,\n  OpenloginUserInfo,\n  RequestParams,\n  UX_MODE,\n  UX_MODE_TYPE,\n} from \"./constants\";\nimport { Modal } from \"./Modal\";\nimport OpenLoginStore from \"./OpenLoginStore\";\nimport Provider from \"./Provider\";\nimport { awaitReq, constructURL, getHashQueryParams, getPopupFeatures, preloadIframe } from \"./utils\";\n\npreloadIframe(\"https://app.openlogin.com/sdk-modal\");\n\nexport type OpenLoginState = {\n  network: OPENLOGIN_NETWORK_TYPE;\n  privKey?: string;\n  walletKey?: string;\n  tKey?: string;\n  oAuthPrivateKey?: string;\n  support3PC?: boolean;\n  clientId: string;\n  iframeUrl: string;\n  redirectUrl: string;\n  startUrl: string;\n  popupUrl: string;\n  store: OpenLoginStore;\n  uxMode: UX_MODE_TYPE;\n  replaceUrlOnRedirect: boolean;\n  originData: OriginData;\n  whiteLabel: WhiteLabelData;\n  loginConfig: LoginConfig;\n};\n\nclass OpenLogin {\n  provider: Provider;\n\n  state: OpenLoginState;\n\n  modal: Modal;\n\n  constructor(options: OpenLoginOptions) {\n    this.provider = new Proxy(new Provider(), {\n      deleteProperty: () => true, // work around for web3\n    });\n    if (!options._iframeUrl) {\n      if (options.network === OPENLOGIN_NETWORK.MAINNET) {\n        options._iframeUrl = \"https://app.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.CYAN) {\n        options._iframeUrl = \"https://cyan.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.TESTNET) {\n        options._iframeUrl = \"https://beta.openlogin.com\";\n      } else if (options.network === OPENLOGIN_NETWORK.DEVELOPMENT) {\n        options._iframeUrl = \"http://localhost:3000\";\n      }\n    }\n    if (!options._iframeUrl) {\n      throw new Error(\"unspecified network and iframeUrl\");\n    }\n    this.modal = new Modal(`${options._iframeUrl}/sdk-modal`);\n    this.initState({\n      ...options,\n      no3PC: options.no3PC ?? false,\n      _iframeUrl: options._iframeUrl,\n      _startUrl: options._startUrl ?? `${options._iframeUrl}/start`,\n      _popupUrl: options._popupUrl ?? `${options._iframeUrl}/popup-window`,\n      redirectUrl: options.redirectUrl ?? `${window.location.protocol}//${window.location.host}${window.location.pathname}`,\n      uxMode: options.uxMode ?? UX_MODE.REDIRECT,\n      replaceUrlOnRedirect: options.replaceUrlOnRedirect ?? true,\n      originData: options.originData ?? { [window.location.origin]: \"\" },\n      whiteLabel: options.whiteLabel ?? {},\n      loginConfig: options.loginConfig ?? {},\n    });\n  }\n\n  get privKey(): string {\n    return this.state.privKey ? this.state.privKey.padStart(64, \"0\") : \"\";\n  }\n\n  initState(options: Required<OpenLoginOptions>): void {\n    this.state = {\n      uxMode: options.uxMode,\n      network: options.network,\n      store: OpenLoginStore.getInstance(),\n      iframeUrl: options._iframeUrl,\n      startUrl: options._startUrl,\n      popupUrl: options._popupUrl,\n      clientId: options.clientId,\n      redirectUrl: options.redirectUrl,\n      replaceUrlOnRedirect: options.replaceUrlOnRedirect,\n      originData: options.originData,\n      loginConfig: options.loginConfig,\n      support3PC: !options.no3PC,\n      whiteLabel: options.whiteLabel,\n    };\n  }\n\n  async init(): Promise<void> {\n    if (this.state.network === OPENLOGIN_NETWORK.TESTNET) {\n      // using console log because it shouldn't be affected by loglevel config\n      // eslint-disable-next-line no-console\n      console.log(\"%c WARNING! You are on testnet. Please set network: 'mainnet' in production\", \"color: #FF0000\");\n    }\n    if (this.state.support3PC) {\n      await Promise.all([this.modal.init(), this.updateOriginData()]);\n      this.provider.init({ iframeElem: this.modal.iframeElem, iframeUrl: this.state.iframeUrl });\n      this._syncState(await this._getData());\n      this._syncState(getHashQueryParams(this.state.replaceUrlOnRedirect));\n      const res = await this._check3PCSupport();\n      this.state.support3PC = !!res.support3PC;\n    } else {\n      await this.updateOriginData();\n      this._syncState(getHashQueryParams(this.state.replaceUrlOnRedirect));\n    }\n  }\n\n  async updateOriginData(): Promise<void> {\n    const filteredOriginData = JSON.parse(JSON.stringify(this.state.originData));\n    Object.keys(filteredOriginData).forEach((key) => {\n      if (filteredOriginData[key] === \"\") delete filteredOriginData[key];\n    });\n    const [whitelist, whiteLabel] = await Promise.all([this.getWhitelist(), this.getWhiteLabel()]);\n    this._syncState({ originData: { ...whitelist, ...filteredOriginData }, whiteLabel: { ...whiteLabel, ...this.state.whiteLabel } });\n  }\n\n  async getWhitelist(): Promise<OriginData> {\n    try {\n      const { clientId } = this.state;\n      if (!clientId) {\n        throw new Error(\"unspecified clientId\");\n      }\n      const url = new URL(\"https://api.developer.tor.us/whitelist\");\n      url.searchParams.append(\"project_id\", this.state.clientId);\n      const res = await get<{ signed_urls: OriginData }>(url.href);\n      return res.signed_urls;\n    } catch (_) {\n      // fail silently\n      return {};\n    }\n  }\n\n  async getWhiteLabel(): Promise<WhiteLabelData> {\n    try {\n      const { clientId } = this.state;\n      if (!clientId) {\n        throw new Error(\"unspecified clientId\");\n      }\n      const url = new URL(\"https://api.developer.tor.us/whitelabel\");\n      url.searchParams.append(\"project_id\", this.state.clientId);\n      const res = await get<{ whiteLabel: WhiteLabelData }>(url.href);\n      return res.whiteLabel;\n    } catch (_) {\n      // fail silently\n      return {};\n    }\n  }\n\n  async _fastLogin(params: Partial<BaseRedirectParams>): Promise<{ privKey: string }> {\n    const defaultParams: BaseRedirectParams = {\n      redirectUrl: this.state.redirectUrl,\n    };\n\n    const loginParams: BaseRedirectParams = {\n      ...defaultParams,\n      ...params,\n    };\n\n    const res = await this.request<{ privKey: string }>({\n      params: [{ ...loginParams, fastLogin: true }],\n      method: OPENLOGIN_METHOD.LOGIN,\n      startUrl: this.state.startUrl,\n      popupUrl: this.state.popupUrl,\n      allowedInteractions: [ALLOWED_INTERACTIONS.POPUP, ALLOWED_INTERACTIONS.REDIRECT],\n    });\n\n    this.state.privKey = res.privKey;\n    return res;\n  }\n\n  async login(params?: LoginParams & Partial<BaseRedirectParams>): Promise<{ privKey: string }> {\n    if (params?.loginProvider) {\n      return this._selectedLogin(params);\n    }\n    return this._modal(params);\n  }\n\n  async _selectedLogin(params: LoginParams & Partial<BaseRedirectParams>): Promise<{ privKey: string }> {\n    const defaultParams: BaseRedirectParams = {\n      redirectUrl: this.state.redirectUrl,\n    };\n\n    const loginParams: LoginParams = {\n      loginProvider: params.loginProvider,\n      ...defaultParams,\n      ...params,\n    };\n\n    // fast login flow\n    // if (this.state.store.get(\"touchIDPreference\") === \"enabled\" && !loginParams.extraLoginOptions?.login_hint) {\n    //   return this._fastLogin(loginParams);\n    // }\n\n    const res = await this.request<{ privKey: string; store?: Record<string, string> }>({\n      method: OPENLOGIN_METHOD.LOGIN,\n      allowedInteractions: [UX_MODE.REDIRECT, UX_MODE.POPUP],\n      startUrl: this.state.startUrl,\n      popupUrl: this.state.popupUrl,\n      params: [loginParams],\n    });\n    this.state.privKey = res.privKey;\n    if (res.store) {\n      this._syncState(res);\n    } else if (this.state.privKey && this.state.support3PC) {\n      this._syncState(await this._getData());\n    }\n    return { privKey: this.privKey };\n  }\n\n  async logout(logoutParams: Partial<BaseLogoutParams> & Partial<BaseRedirectParams> = {}): Promise<void> {\n    const params: Record<string, unknown> = {};\n    // defaults\n    params.redirectUrl = this.state.redirectUrl;\n    params._clientId = this.state.clientId;\n\n    if (logoutParams.clientId) {\n      params._clientId = logoutParams.clientId;\n    }\n    if (logoutParams.fastLogin !== undefined) {\n      params.fastLogin = logoutParams.fastLogin;\n    }\n    if (logoutParams.redirectUrl !== undefined) {\n      params.redirectUrl = logoutParams.redirectUrl;\n    }\n\n    const res = await this.request<void>({\n      method: OPENLOGIN_METHOD.LOGOUT,\n      params: [params],\n      startUrl: this.state.startUrl,\n      popupUrl: this.state.popupUrl,\n      allowedInteractions: [ALLOWED_INTERACTIONS.JRPC, ALLOWED_INTERACTIONS.POPUP, ALLOWED_INTERACTIONS.REDIRECT],\n    });\n\n    this.state.privKey = \"\";\n    // if (!params.fastLogin) this.state.store.set(\"touchIDPreference\", \"disabled\");\n    return res;\n  }\n\n  async request<T>(args: RequestParams): Promise<T> {\n    const pid = randomId();\n    let { params } = args;\n\n    // Note: _origin is added later in postMessageStream for jrpc requests\n    // do not add it here since its used for checking postMessage constraints\n    const session: Partial<SessionInfo> = {};\n    if (params.length !== 1) throw new Error(\"request params array should have only one element\");\n    const { startUrl, popupUrl, method, allowedInteractions } = args;\n    if (allowedInteractions.length === 0) throw new Error(\"no allowed interactions\");\n\n    if (this.state.clientId) {\n      session._clientId = this.state.clientId;\n    }\n\n    if (this.privKey) {\n      const userData = {\n        clientId: session._clientId,\n        timestamp: Date.now().toString(),\n      };\n      const sig = await sign(\n        Buffer.from(this.privKey, \"hex\"),\n        Buffer.from(keccak(\"keccak256\").update(JSON.stringify(userData)).digest(\"hex\"), \"hex\")\n      );\n      session._user = getPublic(Buffer.from(this.privKey, \"hex\")).toString(\"hex\");\n      session._userSig = base64url.encode(sig);\n      session._userData = userData;\n    }\n\n    session._originData = this.state.originData;\n    session._whiteLabelData = this.state.whiteLabel;\n    session._loginConfig = this.state.loginConfig;\n\n    // add in session data (allow overrides)\n    params = [{ ...session, ...params[0] }];\n\n    // use JRPC where possible\n\n    if (this.state.support3PC && allowedInteractions.includes(ALLOWED_INTERACTIONS.JRPC)) {\n      return this._jrpcRequest<Record<string, unknown>[], T>({ method, params });\n    }\n\n    // set origin\n    params[0]._origin = new URL((params[0].redirectUrl as string) ?? this.state.redirectUrl).origin;\n\n    // preset params\n    if (this.state.support3PC) {\n      // set params first if 3PC supported\n      await this._setPIDData(pid, params);\n      // eslint-disable-next-line require-atomic-updates\n      params = [{}];\n    }\n\n    if (!startUrl || !popupUrl) {\n      throw new Error(\"no url for redirect / popup flow\");\n    }\n\n    // method and pid are always in URL hash params\n    // convert params from JSON to base64\n\n    if (this.state.uxMode === UX_MODE.REDIRECT) {\n      // if redirects preferred, check for redirect flows first, then check for popup flow\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.REDIRECT)) {\n        // give time for synchronous methods to complete before redirect\n        setTimeout(() => {\n          window.location.href = constructURL({\n            baseURL: startUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          });\n        }, 50);\n        return {} as T;\n      }\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.POPUP)) {\n        const u = new URL(\n          constructURL({\n            baseURL: popupUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          })\n        );\n        const windowRef = window.open(u.toString(), \"_blank\", getPopupFeatures());\n        return awaitReq<T>(pid, windowRef);\n      }\n    } else {\n      // if popups preferred, check for popup flows first, then check for redirect flow\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.POPUP)) {\n        const u = new URL(\n          constructURL({\n            baseURL: popupUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          })\n        );\n        const windowRef = window.open(u.toString(), \"_blank\", getPopupFeatures());\n        return awaitReq<T>(pid, windowRef);\n      }\n\n      if (allowedInteractions.includes(ALLOWED_INTERACTIONS.REDIRECT)) {\n        // give time for synchronous methods to complete before redirect\n        setTimeout(() => {\n          window.location.href = constructURL({\n            baseURL: startUrl,\n            hash: { b64Params: jsonToBase64(params[0]), _pid: pid, _method: method },\n          });\n        }, 50);\n        return null;\n      }\n    }\n\n    throw new Error(\"no matching allowed interactions\");\n  }\n\n  async _jrpcRequest<T, U>(args: JRPCRequest<T>): Promise<U> {\n    // await this.initialized;\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw new Error(\"invalid request args\");\n    }\n\n    const { method, params } = args;\n\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw new Error(\"invalid request method\");\n    }\n\n    if (params === undefined || !Array.isArray(params)) {\n      throw new Error(\"invalid request params\");\n    }\n\n    if (params.length === 0) {\n      params.push({});\n    }\n\n    return new Promise<U>((resolve, reject) => {\n      this.provider._rpcRequest({ method, params }, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n\n  async _check3PCSupport(): Promise<Record<string, boolean>> {\n    return this._jrpcRequest<Record<string, unknown>[], Record<string, boolean>>({\n      method: OPENLOGIN_METHOD.CHECK_3PC_SUPPORT,\n      params: [{ _originData: this.state.originData }],\n    });\n  }\n\n  async _setPIDData(pid: string, data: Record<string, unknown>[]): Promise<void> {\n    await this.request({\n      allowedInteractions: [ALLOWED_INTERACTIONS.JRPC],\n      method: OPENLOGIN_METHOD.SET_PID_DATA,\n      params: [\n        {\n          pid,\n          data: data[0],\n        },\n      ],\n    });\n  }\n\n  async _getData(): Promise<Record<string, unknown>> {\n    return this.request<Record<string, unknown>>({\n      allowedInteractions: [ALLOWED_INTERACTIONS.JRPC],\n      method: OPENLOGIN_METHOD.GET_DATA,\n      params: [{}],\n    });\n  }\n\n  _syncState(newState: Record<string, unknown>): void {\n    if (newState.store) {\n      if (typeof newState.store !== \"object\") {\n        throw new Error(\"expected store to be an object\");\n      }\n      Object.keys(newState.store).forEach((key) => {\n        // if privKey is available then user is not logged out, but in popup mode store info is not available.\n        // so we don't want to overwrite the local store if privKey is available\n        // and if latest iframe store data is not available\n        if (newState.privKey) {\n          if (newState.store[key]) {\n            this.state.store.set(key, newState.store[key]);\n          }\n        } else {\n          this.state.store.set(key, newState.store[key]);\n        }\n      });\n    }\n    const { store } = this.state;\n    this.state = { ...this.state, ...newState, store };\n  }\n\n  async _modal(params?: LoginParams & Partial<BaseRedirectParams>): Promise<{\n    privKey: string;\n  }> {\n    return new Promise<{ privKey: string }>((resolve, reject) => {\n      this.modal._prompt(this.state.clientId, this.state.whiteLabel, this.state.loginConfig, async (chunk: { cancel?: boolean }): Promise<void> => {\n        if (chunk.cancel) {\n          reject(new Error(\"user canceled login\"));\n        } else {\n          try {\n            const selectedLoginResponse = await this._selectedLogin(merge(params, chunk));\n            resolve(selectedLoginResponse);\n          } catch (error) {\n            reject(error);\n          }\n        }\n      });\n    });\n  }\n\n  async _cleanup(): Promise<void> {\n    await this.modal.cleanup();\n    this.provider.cleanup();\n  }\n\n  async encrypt(message: Buffer, privateKey?: string): Promise<Ecies> {\n    let privKey = privateKey;\n    if (!privKey) {\n      privKey = this.privKey;\n    }\n    // validations\n    if (!/^[0-9a-fA-f]{64}$/.exec(privKey)) {\n      if (privKey === \"\" || privKey === undefined) {\n        throw new Error(\"private key cannot be empty\");\n      } else {\n        throw new Error(\"invalid private key in encrypt\");\n      }\n    }\n    return encrypt(getPublic(Buffer.from(privKey, \"hex\")), message);\n  }\n\n  async decrypt(ciphertext: Ecies, privateKey?: string): Promise<Buffer> {\n    let privKey = privateKey;\n    if (!privKey) {\n      privKey = this.privKey;\n    }\n    // validations\n    if (!/^[0-9a-fA-f]{64}$/.exec(privKey)) {\n      if (privKey === \"\" || privKey === undefined) {\n        throw new Error(\"private key cannot be empty\");\n      } else {\n        throw new Error(\"invalid private key in decrypt\");\n      }\n    }\n    return decrypt(Buffer.from(privKey, \"hex\"), ciphertext);\n  }\n\n  async getUserInfo(): Promise<OpenloginUserInfo> {\n    if (this.privKey) {\n      const storeData = this.state.store.getStore();\n      const userInfo: OpenloginUserInfo = {\n        email: (storeData.email as string) || \"\",\n        name: (storeData.name as string) || \"\",\n        profileImage: (storeData.profileImage as string) || \"\",\n        aggregateVerifier: (storeData.aggregateVerifier as string) || \"\",\n        verifier: (storeData.verifier as string) || \"\",\n        verifierId: (storeData.verifierId as string) || \"\",\n        typeOfLogin: (storeData.typeOfLogin as LOGIN_PROVIDER_TYPE | CUSTOM_LOGIN_PROVIDER_TYPE) || \"\",\n        dappShare: (storeData.dappShare as string) || \"\",\n      };\n\n      return userInfo;\n    }\n    throw new Error(\"user should be logged in to fetch userInfo\");\n  }\n\n  async getEncodedLoginUrl(loginParams: LoginParams & Partial<BaseRedirectParams>): Promise<string> {\n    const { redirectUrl } = loginParams;\n    const { clientId } = this.state;\n    if (!this.state.originData[origin]) {\n      await this.updateOriginData();\n    }\n    const dataObject = {\n      _clientId: clientId,\n      _origin: new URL(redirectUrl).origin,\n      _originData: this.state.originData,\n      redirectUrl,\n      ...loginParams,\n    };\n\n    const b64Params = jsonToBase64(dataObject);\n    const hashParams = {\n      b64Params,\n      _method: \"openlogin_login\",\n    };\n\n    return constructURL({ baseURL: `${this.state.iframeUrl}/start`, hash: hashParams });\n  }\n}\n\nexport default OpenLogin;\n","import { IStore } from \"./IStore\";\n\nexport class MemoryStore implements IStore {\n  store: Record<string, string> = {};\n\n  getItem(key: string): string {\n    return this.store[key];\n  }\n\n  setItem(key: string, value: string): void {\n    this.store[key] = value;\n  }\n}\n","import { storeKey } from \"./constants\";\nimport { IStore } from \"./IStore\";\nimport { MemoryStore } from \"./MemoryStore\";\nimport { localStorageAvailable } from \"./utils\";\n\nexport default class OpenLoginStore {\n  // eslint-disable-next-line no-use-before-define\n  private static instance: OpenLoginStore;\n\n  public storage: IStore;\n\n  private constructor(storage: IStore) {\n    this.storage = storage;\n    try {\n      if (!storage.getItem(storeKey)) {\n        this.resetStore();\n      }\n    } catch (error) {\n      // Storage is not available\n    }\n  }\n\n  static getInstance(): OpenLoginStore {\n    if (!this.instance) {\n      this.instance = new this(localStorageAvailable ? localStorage : new MemoryStore());\n    }\n    return this.instance;\n  }\n\n  toJSON(): string {\n    return this.storage.getItem(storeKey);\n  }\n\n  resetStore(): Record<string, unknown> {\n    const currStore = this.getStore();\n    this.storage.setItem(storeKey, JSON.stringify({}));\n    return currStore;\n  }\n\n  getStore(): Record<string, unknown> {\n    return JSON.parse(this.storage.getItem(storeKey));\n  }\n\n  get<T>(key: string): T {\n    const store = JSON.parse(this.storage.getItem(storeKey));\n    return store[key];\n  }\n\n  set<T>(key: string, value: T): void {\n    const store = JSON.parse(this.storage.getItem(storeKey));\n    store[key] = value;\n    this.storage.setItem(storeKey, JSON.stringify(store));\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"pump\");","import {\n  createIdRemapMiddleware,\n  createStreamMiddleware,\n  JRPCEngine,\n  JRPCRequest,\n  ObjectMultiplex,\n  PostMessageStream,\n  SafeEventEmitter,\n  setupMultiplex,\n  Stream,\n} from \"@toruslabs/openlogin-jrpc\";\nimport { randomId } from \"@toruslabs/openlogin-utils\";\nimport pump from \"pump\";\n\nimport log from \"./loglevel\";\n\nexport default class Provider extends SafeEventEmitter {\n  iframeElem: HTMLIFrameElement | null = null;\n\n  rpcStream: PostMessageStream;\n\n  iframeUrl: string;\n\n  rpcEngine: JRPCEngine;\n\n  initialized: boolean;\n\n  mux: ObjectMultiplex;\n\n  init({ iframeElem, iframeUrl }: { iframeElem: HTMLIFrameElement; iframeUrl: string }): void {\n    this.iframeElem = iframeElem;\n    this.iframeUrl = iframeUrl;\n    this.setupStream();\n    this.initialized = true;\n  }\n\n  setupStream(): void {\n    if (this.iframeElem === null) throw new Error(\"iframe is null\");\n    this.rpcStream = new PostMessageStream({\n      name: \"embed_rpc\",\n      target: \"iframe_rpc\",\n      targetWindow: this.iframeElem.contentWindow,\n      targetOrigin: new URL(this.iframeUrl).origin,\n    });\n\n    this.mux = setupMultiplex(this.rpcStream);\n\n    const JRPCConnection = createStreamMiddleware();\n    pump(\n      JRPCConnection.stream as unknown as Stream,\n      this.mux.createStream(\"jrpc\") as unknown as Stream,\n      JRPCConnection.stream as unknown as Stream,\n      (error) => {\n        log.error(`JRPC connection broken`, error);\n      }\n    );\n\n    const rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(JRPCConnection.middleware);\n    this.rpcEngine = rpcEngine;\n  }\n\n  cleanup(): void {\n    this.iframeElem = null;\n    this.initialized = false;\n  }\n\n  _rpcRequest(payload: JRPCRequest<unknown>, callback: (...args: unknown[]) => void): void {\n    if (!payload.jsonrpc) {\n      payload.jsonrpc = \"2.0\";\n    }\n    if (!payload.id) {\n      payload.id = randomId();\n    }\n    this.rpcEngine.handle(payload, callback);\n  }\n}\n","import { LoginConfig, OriginData, WhiteLabelData } from \"@toruslabs/openlogin-jrpc\";\nimport { ExtraLoginOptions } from \"@toruslabs/openlogin-utils\";\n\nexport const modalDOMElementID = \"openlogin-modal\";\n\nexport const storeKey = \"openlogin_store\";\n\nexport type PopupResponse<T> = {\n  pid: string;\n  data: T;\n};\n\nexport type Maybe<T> = Partial<T> | null | undefined;\n\nexport const UX_MODE = {\n  POPUP: \"popup\",\n  REDIRECT: \"redirect\",\n} as const;\n\nexport type UX_MODE_TYPE = typeof UX_MODE[keyof typeof UX_MODE];\n\nexport const OPENLOGIN_METHOD = {\n  LOGIN: \"openlogin_login\",\n  LOGOUT: \"openlogin_logout\",\n  CHECK_3PC_SUPPORT: \"openlogin_check_3PC_support\",\n  SET_PID_DATA: \"openlogin_set_pid_data\",\n  GET_DATA: \"openlogin_get_data\",\n} as const;\n\n// autocomplete workaround https://github.com/microsoft/TypeScript/issues/29729\nexport type CUSTOM_OPENLOGIN_METHOD_TYPE = string & { toString?: (radix?: number) => string };\n\nexport type OPENLOGIN_METHOD_TYPE = typeof OPENLOGIN_METHOD[keyof typeof OPENLOGIN_METHOD];\n\nexport const ALLOWED_INTERACTIONS = {\n  POPUP: \"popup\",\n  REDIRECT: \"redirect\",\n  JRPC: \"jrpc\",\n} as const;\n\nexport type ALLOWED_INTERACTIONS_TYPE = typeof ALLOWED_INTERACTIONS[keyof typeof ALLOWED_INTERACTIONS];\n\nexport type RequestParams = {\n  startUrl?: string;\n  popupUrl?: string;\n  method: OPENLOGIN_METHOD_TYPE | CUSTOM_OPENLOGIN_METHOD_TYPE;\n  params: Record<string, unknown>[];\n  allowedInteractions: ALLOWED_INTERACTIONS_TYPE[];\n};\n\nexport type BaseLogoutParams = {\n  /**\n   * You can get your clientId/projectId by registering your\n   * dapp on {@link \"https://dashboard.web3auth.io\"| developer dashboard}\n   */\n  clientId: string;\n  /**\n   * Setting fastLogin to `true` will disable fast login for the user on this dapp.\n   *\n   * Defaults to false\n   * @defaultValue false\n   * @experimental\n   *\n   * @remarks\n   * Use this option with caution only when you are sure that you wish to disable fast login for the user on this dapp.\n   * In general you may not need to use this option.\n   */\n  fastLogin: boolean;\n};\n\nexport type BaseRedirectParams = {\n  /**\n   * redirectUrl is the dapp's url where user will be redirected after login.\n   *\n   * @remarks\n   * Register this url at {@link \"https://dashboard.web3auth.io\"| developer dashboard}\n   * else initialization will give error.\n   */\n  redirectUrl?: string;\n  /**\n   * Any custom state you wish to pass along. This will be returned to you post redirect.\n   * Use this to store data that you want to be available to the dapp after login.\n   */\n  appState?: string;\n};\n\nexport const OPENLOGIN_NETWORK = {\n  MAINNET: \"mainnet\",\n  TESTNET: \"testnet\",\n  CYAN: \"cyan\",\n  DEVELOPMENT: \"development\",\n} as const;\n\nexport type OPENLOGIN_NETWORK_TYPE = typeof OPENLOGIN_NETWORK[keyof typeof OPENLOGIN_NETWORK];\n\nexport type OpenLoginOptions = {\n  /**\n   * You can get your clientId/projectId by registering your\n   * dapp on {@link \"https://dashboard.web3auth.io\"| developer dashboard}\n   */\n  clientId: string;\n\n  /**\n   * network specifies the openlogin iframe url url to be used.\n   *\n   * - `'mainnet'`: https://app.openlogin.com will be used which is the production version.\n   * - `'cyan'`: https://cyan.openlogin.com will be used which is the production cyan version.\n   * - `'testnet'`: https://beta.openlogin.com will be used which is the beta version.\n   * - `'development'`: http://localhost:3000 will be used for development purpose.\n   */\n  network: OPENLOGIN_NETWORK_TYPE;\n\n  /**\n   * Setting no3PC forces openlogin to assume that third party cookies are blocked\n   * in the browser.\n   *\n   * @defaultValue false\n   * @remarks\n   * Only pass no3PC to `true` when you are sure that third party cookies are not\n   * supported. By default openlogin will self check third party cookies and proceed\n   * accordingly.\n   */\n  no3PC?: boolean;\n\n  /**\n   * redirectUrl is the dapp's url where user will be redirected after login.\n   *\n   * @remarks\n   * Register this url at {@link \"https://dashboard.web3auth.io\"| developer dashboard}\n   * else initialization will give error.\n   */\n  redirectUrl?: string;\n\n  /**\n   * two uxModes are supported:-\n   * - `'POPUP'`: In this uxMode, a popup will be shown to user for login.\n   * - `'REDIRECT'`: In this uxMode, user will be redirected to a new window tab for login.\n   *\n   * @defaultValue `'POPUP'`\n   * @remarks\n   *\n   * Use of `'REDIRECT'` mode is recommended in browsers where popups might get blocked.\n   */\n  uxMode?: UX_MODE_TYPE;\n\n  /**\n   * replaceUrlOnRedirect removes the params from the redirected url after login\n   *\n   * @defaultValue true\n   */\n  replaceUrlOnRedirect?: boolean;\n\n  /**\n   * originData is used to verify the origin of dapp by iframe.\n   *\n   * @internal\n   * @remarks\n   * You don't have to pass originData explicitly if you have registered your dapp at\n   * {@link \"https://dashboard.web3auth.io\"| developer dashboard}.\n   *\n   * originData contains a signature of dapp's origin url which is generated using\n   * project's secret.\n   */\n  originData?: OriginData;\n\n  /**\n   * loginConfig enables you to pass your own login verifiers configuration for various\n   * loginProviders.\n   *\n   * loginConfig is key value map where each key should be a valid loginProvider and value\n   * should be custom configuration for that loginProvider\n   *\n   * @remarks\n   * You can deploy your own verifiers from {@link \"https://dashboard.web3auth.io\"| developer dashboard}\n   * to use here.\n   *\n   */\n  loginConfig?: LoginConfig;\n\n  /**\n   * _iframeUrl is for internal development use only and is used to override the\n   * `network` parameter.\n   * @internal\n   */\n  _iframeUrl?: string;\n  /**\n   * _startUrl is for internal development use only and is used specify authentication\n   * start url of iframe.\n   * @internal\n   */\n  _startUrl?: string;\n\n  /**\n   * _popupUrl is for internal development use only and is used specify url of popup window\n   * for popup uxMode.\n   * @internal\n   */\n  _popupUrl?: string;\n\n  /**\n   * options for whitelabling default openlogin modal.\n   */\n  whiteLabel?: WhiteLabelData;\n};\n\nexport const LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\",\n  WEBAUTHN: \"webauthn\",\n  JWT: \"jwt\",\n} as const;\n\n/**\n * {@label loginProviderType}\n */\nexport type LOGIN_PROVIDER_TYPE = typeof LOGIN_PROVIDER[keyof typeof LOGIN_PROVIDER];\n\n// autocomplete workaround https://github.com/microsoft/TypeScript/issues/29729\nexport type CUSTOM_LOGIN_PROVIDER_TYPE = string & { toString?: (radix?: number) => string };\n\nexport const MFA_LEVELS = {\n  DEFAULT: \"default\",\n  OPTIONAL: \"optional\",\n  MANDATORY: \"mandatory\",\n  NONE: \"none\",\n} as const;\n\nexport type MfaLevelType = typeof MFA_LEVELS[keyof typeof MFA_LEVELS];\n\nexport type LoginParams = BaseRedirectParams & {\n  /**\n   * loginProvider sets the oauth login method to be used.\n   * You can use any of the valid loginProvider from the supported list.\n   *\n   * If this param is not passed then it will show all the available\n   * login methods to user in a modal.\n   *\n   */\n  loginProvider?: LOGIN_PROVIDER_TYPE | CUSTOM_LOGIN_PROVIDER_TYPE;\n\n  /**\n   * Setting fastLogin to `true` will force user to login with webauthn if\n   * webauthn is available on device.\n   *\n   * Defaults to false\n   * @defaultValue false\n   * @experimental\n   *\n   * @remarks\n   * Use this option with caution only when you are sure about that user has\n   * enabled webauthn while registration, else don't use this option.\n   * Openlogin will itself take care of detecting and handling webauthn.\n   * In general you may not need to use this option.\n   */\n  fastLogin?: boolean;\n\n  /**\n   * Setting relogin to `true` will force user to relogin when login\n   * method is called even if user is already logged in. By default login\n   * method call skips login process if user is already logged in.\n   *\n   * * Defaults to false\n   * @defaultValue false\n   */\n  relogin?: boolean;\n\n  /**\n   * setting skipTKey to `true` will skip TKey onboarding for new users,\n   * whereas old users  will be presented with an option to skip tKey in UI\n   * if this option is enabled.\n   *\n   * Defaults to false\n   * @defaultValue false\n   */\n  skipTKey?: boolean;\n\n  /**\n   * You can set the `mfaLevel` to customize when mfa screen should be shown to user.\n   * It currently accepts 3 values:-\n   * - `'default'`: Setting mfa level to `default` will present mfa screen to user on every third login.\n   * - `'optional'`: Setting mfa level to `default` will present mfa screen to user on every login but user can skip it.\n   * - `'mandatory'`: Setting mfa level to `mandatory` will make it mandatory for user to setup mfa after login.\n   *\n   * Defaults to `default`\n   * @defaultValue `default`\n   */\n  mfaLevel?: MfaLevelType;\n\n  /**\n   * This option is for internal use only in torus wallet and has not effect\n   * on user's login on other dapps.\n   *\n   * Defaults to false\n   * @defaultValue false\n   * @internal\n   */\n  getWalletKey?: boolean;\n\n  /**\n   * extraLoginOptions can be used to pass standard oauth login options to\n   * loginProvider.\n   *\n   * For ex: you will have to pass `login_hint` as user's email and `domain`\n   * as your app domain in `extraLoginOptions` while using `email_passwordless`\n   * loginProvider\n   */\n  extraLoginOptions?: ExtraLoginOptions;\n\n  /**\n   * Custom Logins can get a dapp share returned to them post successful login.\n   * This is useful if the dapps want to use this share to allow users to login seamlessly\n   * dappShare is a 24 word seed phrase\n   */\n  dappShare?: string;\n};\n\nexport type OpenloginUserInfo = {\n  email: string;\n  name: string;\n  profileImage: string;\n  aggregateVerifier: string;\n  verifier: string;\n  verifierId: string;\n  typeOfLogin: LOGIN_PROVIDER_TYPE | CUSTOM_LOGIN_PROVIDER_TYPE;\n  dappShare?: string;\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"loglevel\");","import loglevel from \"loglevel\";\n\nloglevel.setLevel(\"error\");\n\nexport default loglevel.getLogger(\"openlogin\");\n","import { getPublic, sign } from \"@toruslabs/eccrypto\";\nimport { base64url, keccak, safeatob } from \"@toruslabs/openlogin-utils\";\n\nimport { PopupResponse } from \"./constants\";\nimport log from \"./loglevel\";\n\nexport async function documentReady(): Promise<void> {\n  return new Promise<void>((resolve) => {\n    if (document.readyState !== \"loading\") {\n      resolve();\n    } else {\n      document.addEventListener(\"DOMContentLoaded\", () => {\n        resolve();\n      });\n    }\n  });\n}\n\nexport const htmlToElement = <T extends Element>(html: string): T => {\n  const template = window.document.createElement(\"template\");\n  const trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild as T;\n};\n\nexport async function whitelistUrl(clientId: string, appKey: string, origin: string): Promise<string> {\n  const appKeyBuf = Buffer.from(appKey.padStart(64, \"0\"), \"hex\");\n  if (base64url.encode(getPublic(appKeyBuf)) !== clientId) throw new Error(\"appKey mismatch\");\n  const sig = await sign(appKeyBuf, Buffer.from(keccak(\"keccak256\").update(origin).digest(\"hex\"), \"hex\"));\n  return base64url.encode(sig);\n}\n\nexport function getHashQueryParams(replaceUrl = false): Record<string, string> {\n  const result = {};\n\n  const url = new URL(window.location.href);\n  url.searchParams.forEach((value, key) => {\n    if (key !== \"result\") {\n      result[key] = value;\n    }\n  });\n  const queryResult = url.searchParams.get(\"result\");\n  if (queryResult) {\n    try {\n      const queryParams = JSON.parse(safeatob(queryResult));\n      Object.keys(queryParams).forEach((key) => {\n        result[key] = queryParams[key];\n      });\n    } catch (error) {\n      log.error(error);\n    }\n  }\n\n  const hash = url.hash.substring(1);\n  const hashUrl = new URL(`${window.location.origin}/?${hash}`);\n  hashUrl.searchParams.forEach((value, key) => {\n    if (key !== \"result\") {\n      result[key] = value;\n    }\n  });\n  const hashResult = hashUrl.searchParams.get(\"result\");\n\n  if (hashResult) {\n    try {\n      const hashParams = JSON.parse(safeatob(hashResult));\n      Object.keys(hashParams).forEach((key) => {\n        result[key] = hashParams[key];\n      });\n    } catch (error) {\n      log.error(error);\n    }\n  }\n\n  if (replaceUrl) {\n    const cleanUrl = window.location.origin + window.location.pathname;\n    window.history.replaceState(null, \"\", cleanUrl);\n  }\n\n  return result;\n}\n\nexport function awaitReq<T>(id: string, windowRef: Window): Promise<T> {\n  return new Promise((resolve, reject) => {\n    if (!windowRef) reject(new Error(\"Unable to open window\"));\n    let closedByHandler = false;\n    const closedMonitor = setInterval(() => {\n      if (!closedByHandler && windowRef.closed) {\n        clearInterval(closedMonitor);\n        reject(new Error(\"user closed popup\"));\n      }\n    }, 500);\n    const handler = (ev: MessageEvent<PopupResponse<T & { error?: string }>>) => {\n      const { pid } = ev.data;\n      if (id !== pid) return;\n      window.removeEventListener(\"message\", handler);\n      closedByHandler = true;\n      clearInterval(closedMonitor);\n      windowRef.close();\n      if (ev.data.data && ev.data.data.error) {\n        reject(new Error(ev.data.data.error));\n      } else {\n        resolve(ev.data.data);\n      }\n    };\n\n    window.addEventListener(\"message\", handler);\n  });\n}\n\nexport function constructURL(params: { baseURL: string; query?: Record<string, unknown>; hash?: Record<string, unknown> }): string {\n  const { baseURL, query, hash } = params;\n\n  const url = new URL(baseURL);\n  if (query) {\n    Object.keys(query).forEach((key) => {\n      url.searchParams.append(key, query[key] as string);\n    });\n  }\n  if (hash) {\n    const h = new URL(constructURL({ baseURL, query: hash })).searchParams.toString();\n    url.hash = h;\n  }\n  return url.toString();\n}\n\nexport function storageAvailable(type: string): boolean {\n  let storageExists = false;\n  let storageLength = 0;\n  let storage: Storage;\n  try {\n    storage = window[type];\n    storageExists = true;\n    storageLength = storage.length;\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (error) {\n    return (\n      error &&\n      // everything except Firefox\n      (error.code === 22 ||\n        // Firefox\n        error.code === 1014 ||\n        // test name field too, because code might not be present\n        // everything except Firefox\n        error.name === \"QuotaExceededErro r\" ||\n        // Firefox\n        error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\n      // acknowledge QuotaExceededError only if there's something already stored\n      storageExists &&\n      storageLength !== 0\n    );\n  }\n}\n\nexport const sessionStorageAvailable = storageAvailable(\"sessionStorage\");\nexport const localStorageAvailable = storageAvailable(\"localStorage\");\n\nexport function preloadIframe(url: string): void {\n  try {\n    if (typeof document === \"undefined\") return;\n    const openloginIframeHtml = document.createElement(\"link\");\n    openloginIframeHtml.href = url;\n    openloginIframeHtml.crossOrigin = \"anonymous\";\n    openloginIframeHtml.type = \"text/html\";\n    openloginIframeHtml.rel = \"prefetch\";\n    if (openloginIframeHtml.relList && openloginIframeHtml.relList.supports) {\n      if (openloginIframeHtml.relList.supports(\"prefetch\")) {\n        document.head.appendChild(openloginIframeHtml);\n      }\n    }\n  } catch (error) {\n    log.error(error);\n  }\n}\n\nexport function getPopupFeatures(): string {\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n\n  const w = 1200;\n  const h = 700;\n\n  const width = window.innerWidth\n    ? window.innerWidth\n    : document.documentElement.clientWidth\n    ? document.documentElement.clientWidth\n    : window.screen.width;\n\n  const height = window.innerHeight\n    ? window.innerHeight\n    : document.documentElement.clientHeight\n    ? document.documentElement.clientHeight\n    : window.screen.height;\n\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = `titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${h / systemZoom},width=${w / systemZoom},top=${top},left=${left}`;\n  return features;\n}\n","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@toruslabs/eccrypto\");","module.exports = require(\"@toruslabs/openlogin-jrpc\");","module.exports = require(\"@toruslabs/openlogin-utils\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from \"./constants\";\nexport * from \"./IStore\";\nexport { default as loglevel } from \"./loglevel\";\nexport { default } from \"./OpenLogin\";\nexport * from \"./OpenLogin\";\nexport { default as OpenLoginStore } from \"./OpenLoginStore\";\nexport { default as Provider } from \"./Provider\";\nexport * from \"./utils\";\n"],"names":["PostMessageStream","setupMultiplex","modalDOMElementID","log","documentReady","htmlToElement","handleStream","handle","eventName","handler","handlerWrapper","chunk","removeListener","on","Modal","constructor","modalUrl","init","initIFrame","setupStream","iframeElem","Error","mux","name","target","targetWindow","contentWindow","targetOrigin","URL","origin","verifierStream","createStream","src","documentIFrameElem","document","getElementById","remove","info","modalZIndex","toString","_hideModal","body","appendChild","Promise","resolve","onload","initialized","_showModal","style","display","position","width","height","top","right","left","bottom","border","setAttribute","Object","entries","map","k","v","join","_prompt","clientId","whiteLabel","loginConfig","cb","modalHandler","write","cleanup","decrypt","encrypt","getPublic","sign","get","getRpcPromiseCallback","base64url","jsonToBase64","keccak","randomId","merge","ALLOWED_INTERACTIONS","OPENLOGIN_METHOD","OPENLOGIN_NETWORK","UX_MODE","OpenLoginStore","Provider","awaitReq","constructURL","getHashQueryParams","getPopupFeatures","preloadIframe","OpenLogin","options","provider","Proxy","deleteProperty","_iframeUrl","network","MAINNET","CYAN","TESTNET","DEVELOPMENT","modal","initState","no3PC","_startUrl","_popupUrl","redirectUrl","window","location","protocol","host","pathname","uxMode","REDIRECT","replaceUrlOnRedirect","originData","privKey","state","padStart","store","getInstance","iframeUrl","startUrl","popupUrl","support3PC","console","all","updateOriginData","_syncState","_getData","res","_check3PCSupport","filteredOriginData","JSON","parse","stringify","keys","forEach","key","whitelist","getWhitelist","getWhiteLabel","url","searchParams","append","href","signed_urls","_","_fastLogin","params","defaultParams","loginParams","request","fastLogin","method","LOGIN","allowedInteractions","POPUP","login","loginProvider","_selectedLogin","_modal","logout","logoutParams","_clientId","undefined","LOGOUT","JRPC","args","pid","session","length","userData","timestamp","Date","now","sig","Buffer","from","update","digest","_user","_userSig","encode","_userData","_originData","_whiteLabelData","_loginConfig","includes","_jrpcRequest","_origin","_setPIDData","setTimeout","baseURL","hash","b64Params","_pid","_method","u","windowRef","open","Array","isArray","push","reject","_rpcRequest","CHECK_3PC_SUPPORT","data","SET_PID_DATA","GET_DATA","newState","set","cancel","selectedLoginResponse","error","_cleanup","message","privateKey","exec","ciphertext","getUserInfo","storeData","getStore","userInfo","email","profileImage","aggregateVerifier","verifier","verifierId","typeOfLogin","dappShare","getEncodedLoginUrl","dataObject","hashParams","MemoryStore","getItem","setItem","value","storeKey","localStorageAvailable","storage","resetStore","instance","localStorage","toJSON","currStore","createIdRemapMiddleware","createStreamMiddleware","JRPCEngine","SafeEventEmitter","pump","rpcStream","JRPCConnection","stream","rpcEngine","middleware","payload","callback","jsonrpc","id","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","WEBAUTHN","JWT","MFA_LEVELS","DEFAULT","OPTIONAL","MANDATORY","NONE","loglevel","setLevel","getLogger","safeatob","readyState","addEventListener","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","whitelistUrl","appKey","appKeyBuf","replaceUrl","result","queryResult","queryParams","substring","hashUrl","hashResult","cleanUrl","history","replaceState","closedByHandler","closedMonitor","setInterval","closed","clearInterval","ev","removeEventListener","close","query","h","storageAvailable","type","storageExists","storageLength","x","removeItem","code","sessionStorageAvailable","openloginIframeHtml","crossOrigin","rel","relList","supports","head","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","w","innerWidth","documentElement","clientWidth","screen","innerHeight","clientHeight","systemZoom","Math","abs","features","default"],"sourceRoot":""}